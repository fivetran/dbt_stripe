version: 2

models:
  - name: int_stripe__account_daily
    description: Each record represents each day's ending balances per account.

  - name: int_stripe__account_partitions
    description: Each record is a group of partitioned account totals updating null values with zeroes to eventually calculate running totals downstream.

  - name: int_stripe__account_rolling_totals
    description: Each record represents each day's ending balances per account, in addition to changes over time.
    
  - name: int_stripe__date_spine
    description: Each record represents a day of each calendar year.

  - name: int_stripe__incomplete_charges
    description: Each record represents a charge that is incomplete.

  - name: stripe__balance_transactions
    description: Each record represents a change to your account balance, enriched with data about the transaction.
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - balance_transaction_id
            - source_relation
    columns:
    - name: balance_transaction_id 
      description: Unique identifier for the transaction. 
    - name: balance_transaction_created_at 
      description: When the transaction took place
    - name: balance_transaction_available_on 
      description: The date the transaction’s net funds will become available in the Stripe balance.
    - name: balance_transaction_currency 
      description: Three-letter ISO currency code, in lowercase.
    - name: balance_transaction_amount 
      description: Gross amount of the transaction, in cents.
    - name: balance_transaction_fee 
      description: Fees (in cents) paid for this transaction.
    - name: balance_transaction_net
      description: Net amount of the transaction, in cents. Gross amount minus fees, refunds, and disputes
    - name: balance_transaction_type 
      description: The type of transaction.  Possible values are adjustment, advance, advance_funding, application_fee, application_fee_refund, charge, connect_collection_transfer, issuing_authorization_hold, issuing_authorization_release, issuing_dispute, issuing_transaction, payment, payment_failure_refund, payment_refund, payout, payout_cancel, payout_failure, refund, refund_failure, reserve_transaction, reserved_funds, stripe_fee, stripe_fx_fee, tax_fee, topup, topup_reversal, transfer, transfer_cancel, transfer_failure, or transfer_refund.
    - name: balance_transaction_reporting_category 
      description: Groupings of transactions types based on how they show in Stripe's reporting
    - name: balance_transaction_source_id
      description: The Stripe object to which this transaction is related.
    - name: balance_transaction_description 
      description: An arbitrary string attached to the object. Often useful for displaying to users.
    - name: customer_facing_amount 
      description: The transaction amount that the customer sees.
    - name: customer_facing_currency 
      description: Three-letter ISO currency code that the customer sees.
    - name: effective_at 
      description: calendar day after available_at
    - name: automatic_payout_id		
      description: (Applies only to accounts on automatic payouts.) The unique ID for the associated payout.
    - name: payout_currency
      description: Three-letter ISO currency code of the payout, in lowercase.
    - name: payout_created_at
      description: Time at which the payout record was created.
    - name: payout_is_automatic
      description: True if the payout was created by an automated payout schedule, and false if it was requested manually.
    - name: payout_arrival_date_at
      description: Date the payout is expected to arrive in the bank. This factors in delays like weekends or bank holidays.
    - name: automatic_payout_effective_at		
      description: The date we expect this automatic payout to arrive in your bank account, in UTC. This is also when the paid-out funds are deducted from your Stripe balance.
    - name: destination_bank_account_id
      description: ID of the bank account the payout was sent to.
    - name: destination_card_id
      description: ID of the card the payout was sent to.
    - name: customer_id 
      description: The customer associated with the balance transaction (based on charge or refund details)
    - name: customer_email
      description: The customer’s email address.
    - name: customer_name
      description: Customer name.
    - name: receipt_email 
      description: The email the receipt was emailed to for this transaction.
    - name: customer_description 
      description: The description field associated with the customer 
    - name: customer_shipping_address_city
      description: Attribute of the customer's shipping address.
    - name: customer_shipping_address_country
      description: Attribute of the customer's shipping address.
    - name: customer_shipping_address_line_1
      description: Attribute of the customer's shipping address.
    - name: customer_shipping_address_line_2
      description: Attribute of the customer's shipping address.
    - name: customer_shipping_address_postal_code
      description: Attribute of the customer's shipping address.
    - name: customer_shipping_address_state
      description: Attribute of the customer's shipping address.
    - name: customer_address_city
      description: '{{ doc("city") }}'
    - name: customer_address_country
      description: '{{ doc("country") }}'
    - name: customer_address_line_1
      description: '{{ doc("line_1") }}'
    - name: customer_address_line_2
      description: '{{ doc("line_2") }}'
    - name: customer_address_postal_code
      description: '{{ doc("postal_code") }}'
    - name: customer_address_state
      description: '{{ doc("state") }}'
    - name: charge_id 
      description: The id of the charge associated with the balance transaction 
    - name: charge_shipping_address_city
      description: City, district, suburb, town, or village belonging to the charge.
    - name: charge_shipping_address_country
      description: Two-letter country code (ISO 3166-1 alpha-2) belonging to the charge.
    - name: charge_shipping_address_line_1
      description: Address line 1 (e.g., street, PO Box, or company name) belonging to the charge.
    - name: charge_shipping_address_line_2
      description: Address line 2 (e.g., apartment, suite, unit, or building) belonging to the charge.
    - name: charge_shipping_address_postal_code
      description: ZIP or postal code belonging to the charge.
    - name: charge_shipping_address_state
      description: State, county, province, or region belonging to the charge.
    - name: payment_intent_id 
      description: The id of the payment intent associated with the balance transaction 
    - name: charge_created_at 
      description: Timestamp of the charge object associated with the balance transaction 
    - name: payment_method_type 
      description: The id of the payment method type associated with the balance transaction 
    - name: payment_method_brand
      description: Card brand used for the payment method. Can be American Express, Diners Club, Discover, JCB, MasterCard, UnionPay, Visa, or Unknown.
    - name: payment_method_funding
      description: Card funding type for the payment method. Can be credit, debit, prepaid, or unknown.
    - name: card_address_city
      description: '{{ doc("city") }}'
    - name: card_address_country
      description: '{{ doc("country") }}'
    - name: card_address_line_1
      description: '{{ doc("line_1") }}'
    - name: card_address_line_2
      description: '{{ doc("line_2") }}'
    - name: card_address_state
      description: '{{ doc("state") }}'
    - name: card_address_postal_code
      description: '{{ doc("postal_code") }}'
    - name: card_brand 
      description: The brand of the card associated with the balance transaction 
    - name: card_funding 
      description: Card funding type. Can be credit, debit, prepaid, or unknown.
    - name: card_country 
      description: The country the card was issued in.
    - name: payout_id 
      description: ID for the payout associated with this balance transaction 
    - name: payout_status 
      description: Current status of the payout.  Can be paid, pending, in_transit, canceled or failed.
    - name: payout_type 
      description: Whether the payout was to a bank_account or card.
    - name: payout_description 
      description: An arbitrary string attached to the payout. Often useful for displaying to users.
    - name: refund_reason 
      description: Reason for the refund, either user-provided (duplicate, fraudulent, or requested_by_customer) or generated by Stripe internally (expired_uncaptured_charge).
    - name: invoice_id
      description: The ID of the invoice this record is a part of.
    - name: invoice_number
      description: The number of the invoice associated with this record.
    - name: subscription_id
      description: The ID of the subscription is associated with this record.
    - name: charge_statement_descriptor
      description: Extra information about a source. This will appear on your customer’s statement every time you charge the source.
    - name: dispute_id
      description: Unique identifier for the object.
    - name: dispute_reason
      description: Reason given by cardholder for dispute. Possible values are bank_cannot_process, check_returned, credit_not_processed, customer_initiated, debit_not_authorized, duplicate, fraudulent, general, incorrect_account_details, insufficient_funds, product_not_received, product_unacceptable, subscription_canceled, or unrecognized. 
    - name: refund_id
      description: ID of the refund associated with this record.
    - name: transfer_id
      description: ID of the transfer associated with this record.
    - name: connected_account_id
      description: The ID of the account connected to the transaction.
    - name: connected_account_country
      description: The country of the account connected to the transaction.
    - name: connected_account_direct_charge_id
      description: (Beta) For Stripe Connect activity related to a connected account, charge id of the direct charge that happened on connected account.
    - name: source_relation
      description: "{{ doc('source_relation') }}"

  - name: stripe__customer_overview
    description: Each record represents a customer, enriched with metrics about their associated transactions.
    columns:
      - name: customer_id 
        description: Unique identifier for each record from the Stripe customer object.
      - name: customer_description 
        description: An arbitrary string attached to the object. Often useful for displaying to users.
      - name: email 
        description: Email address associated with the customer.
      - name: customer_created_at 
        description: Timestamp of when the customer entry was created.
      - name: is_delinquent
        description: When the customer’s latest invoice is billed by charging automatically, delinquent is true if the invoice’s latest charge is failed. When the customer’s latest invoice is billed by sending an invoice, delinquent is true if the invoice is not paid by its due date.
      - name: total_sales 
        description: Sum of all charges made to this customer.
      - name: total_refunds 
        description: Sum of all refunds made to this customer.
      - name: total_gross_transaction_amount
        description: Gross amount of all transactions made with this customer.
      - name: total_fees 
        description: Total fees charged on all transactions made with this customer.
      - name: total_net_transaction_amount 
        description: Net amount of all transactions made with this customer. This is the gross amount excluding fees, refunds, and disputes.
      - name: total_sales_count 
        description: The total number of sales made to this customer.
      - name: total_refund_count 
        description: The total number of refunds made to this customer. 
      - name: sales_this_month 
        description: Sum of charges made to this customer this month.
      - name: refunds_this_month 
        description: Sum of refunds made to this customer this month.
      - name: gross_transaction_amount_this_month 
        description: Gross amount of transactions made with this customer this month.
      - name: fees_this_month 
        description: Total fees charged on transactions made with this customer this month.
      - name: net_transaction_amount_this_month 
        description: Net amount of transactions made with this customer this month.
      - name: sales_count_this_month 
        description: The number of sales made to this customer this month.
      - name: refund_count_this_month
        description: The number of refunds made to this customer this month.
      - name: first_sale_date 
        description: Date of the first time this customer was charged.
      - name: most_recent_sale_date 
        description: Date of the most recent time this customer was charged.
      - name: total_failed_charge_count
        description: The total number of incomplete charges this customer has had.
      - name: total_failed_charge_amount
        description: The total amount from incomplete charges this customer has had.
      - name: failed_charge_count_this_month
        description: The number of incomplete charges this customer has had this month.
      - name: failed_charge_amount_this_month
        description: The amount from incomplete charges this customer has had this month.
      - name: customer_currency 
        description: Currency used by the customer.
      - name: default_card_id
        description: ID of the default card used by the customer.
      - name: shipping_name 
        description: Attribute of the customer's shipping address.
      - name: shipping_address_line_1 
        description: Attribute of the customer's shipping address.
      - name: shipping_address_line_2 
        description: Attribute of the customer's shipping address.
      - name: shipping_address_city 
        description: Attribute of the customer's shipping address.
      - name: shipping_address_state 
        description: Attribute of the customer's shipping address.
      - name: shipping_address_country 
        description: Attribute of the customer's shipping address.
      - name: shipping_address_postal_code 
        description: Attribute of the customer's shipping address.
      - name: shipping_phone
        description: Attribute of the customer's shipping address.
      - name: source_relation
        description: "{{ doc('source_relation') }}"
      - name: phone
        description: Customer's phone number. 
      - name: is_deleted
        description: Boolean reflecting whether the customer has been deleted in Stripe.

  - name: stripe__invoice_details
    description: Each record represents an invoice, enriched with details about the associated charge, customer, and subscription data.
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - invoice_id
            - source_relation
    columns:
      - name: invoice_id
        description: The unique Identifier of the invoice object. Note invoices can have many line items, so this value can appear multiple times.
      - name: invoice_number 
        description: A unique, identifying string that appears on emails sent to the customer for this invoice. This starts with the customer’s unique invoice_prefix if it is specified.
      - name: invoice_created_at 
        description: Timestamp of when the invoice was created.
      - name: period_start
        description: Timestamp of the start of the period.
      - name: period_end
        description: Timestamp of the end of the period.
      - name: status 
        description: Current status of the invoice.
      - name: due_date 
        description: Date when payment for the invoice is due.
      - name: currency 
        description: The currency that the invoice is in. Three-letter ISO currency code, in lowercase.
      - name: amount_due 
        description: The amount, if any, that the customer has paid on the invoice
      - name: amount_paid 
        description: The amount, if any, that the customer has paid on the invoice
      - name: amount_due 
        description: Final amount due at this time for this invoice. If the invoice’s total is smaller than the minimum charge amount, for example, or if there is account credit that can be applied to the invoice, the amount_due may be 0. If there is a positive starting_balance for the invoice (the customer owes money), the amount_due will also take that into account. The charge that gets generated for the invoice will be for the amount specified in amount_due.
      - name: subtotal 
        description: The amount of the invoice before discounts and taxes.
      - name: tax 
        description: The amount of tax being charged in the invoice.
      - name: total 
        description: The Total after discounts and taxes.
      - name: amount_remaining 
        description: The amount of the invoice remaining to be paid.
      - name: attempt_count 
        description: Number of payment attempts made for this invoice, from the perspective of the payment retry schedule.
      - name: invoice_memo 
        description: An arbitrary string attached to the object. Often useful for displaying to users.
      - name: number_of_line_items
        description: Number of line item records for this invoice.
      - name: total_quantity 
        description: The total quantity of items for this invoice.
      - name: balance_transaction_id 
        description: The ID of the balance transaction object representing payment
      - name: charge_amount 
        description: The amount charged to the customer.
      - name: charge_status 
        description: The status of the charge for the invoice.
      - name: charge_created_at 
        description: When the charge for the invoice was created.
      - name: charge_is_refunded 
        description: Whether the charge has been fully refunded. If the charge is only partially refunded, this attribute will still be false.
      - name: connected_account_id
        description: The ID of the account connected to the charge.
      - name: customer_id
        description: The associated customer reference.
      - name: customer_description 
        description: Description of the customer.
      - name: customer_account_balance 
        description: Current balance, if any, being stored on the customer. If negative, the customer has credit to apply to their next invoice. If positive, the customer has an amount owed that will be added to their next invoice.
      - name: customer_currency 
        description: Three-letter ISO code for the currency the customer can be charged in for recurring billing purposes.
      - name: customer_is_delinquent 
        description: When the customer’s latest invoice is billed by charging automatically, delinquent is true if the invoice’s latest charge is failed. When the customer’s latest invoice is billed by sending an invoice, delinquent is true if the invoice is not paid by its due date.
      - name: customer_email 
        description: Email of the customer.
      - name: subscription_id 
        description: ID of the subscription this invoice relates to.
      - name: subscription_item_id 
        description: ID of the subscription item this invoice item relates to.
      - name: subscription_billing 
        description: How the subscription is billed
      - name: subscription_start_date 
        description: The start date of the subscription
      - name: subscription_ended_at 
        description: The end date of the subscription
      - name: source_relation
        description: "{{ doc('source_relation') }}"

  - name: stripe__invoice_line_item_details
    description: Each record represents an invoice line item, enriched with details about the associated invoice, charge, customer, subscription, and pricing data.
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - invoice_line_item_id
            - invoice_id
            - source_relation
    columns:
      - name: invoice_line_item_id 
        description: The unique Identifier of the invoice line object. Note that the same line item can be shown across different invoices, so this value can appear multiple times.
      - name: invoice_id
        description: The unique Identifier of the invoice object. Note invoices can have many line items, so this value can appear multiple times.
      - name: invoice_item_id 
        description: The ID of the invoice item this item is a part of
      - name: invoice_line_item_amount
        description: Amount for this line item.
      - name: currency
        description: Currency of this line item.
      - name: invoice_line_item_memo
        description: Description for this line item.
      - name: is_discountable
        description: Whether this line item is discountable.
      - name: plan_id
        description: The ID that documents the plan record detailing the base price, currency, and billing information for each product. Valid if you are using the Plan API.
      - name: price_id
        description: The ID that documents the price record detailing the base price, currency, and billing information for each product. Valid if you are using the new Prices API.
      - name: proration
        description: Whether this is a proration.
      - name: quantity
        description: The quantity of the subscription, if the line item is a subscription or a proration.
      - name: subscription_id
        description: The ID of the subscription that the invoice item pertains to, if any.
      - name: subscription_item_id
        description: The subscription item that generated this invoice item. Left empty if the line item is not an explicit result of a subscription.
      - name: type
        description: A string identifying the type of the source of this line item, either an invoice item or a subscription.
      - name: unique_invoice_line_item_id
        description: A unique id generated for old invoice line item ID's from a past version of the API
      - name: period_start
        description: Start of the usage period during which invoice items were added to this invoice.
      - name: period_end
        description: End of the usage period during which invoice items were added to this invoice.
      - name: invoice_created_at 
        description: Timestamp of when the invoice was created.
      - name: invoice_status 
        description: Current status of the invoice.
      - name: invoice_due_date 
        description: Date when payment for the invoice is due.
      - name: invoice_amount_due
        description: Final amount due at this time for this invoice. If the invoice’s total is smaller than the minimum charge amount, for example, or if there is account credit that can be applied to the invoice, the amount_due may be 0. If there is a positive starting_balance for the invoice (the customer owes money), the amount_due will also take that into account. The charge that gets generated for the invoice will be for the amount specified in amount_due.
      - name: invoice_amount_paid 
        description: The amount, if any, that the customer has paid on the invoice
      - name: invoice_subtotal 
        description: The amount of the invoice before discounts and taxes.
      - name: invoice_tax 
        description: The amount of tax being charged in the invoice.
      - name: invoice_total 
        description: The total of the invoice after discounts and taxes.
      - name: connected_account_id
        description: The ID of the account connected to the charge.
      - name: customer_id
        description: The associated customer reference.
      - name: subscription_billing 
        description: How the subscription is billed
      - name: subscription_start_date 
        description: The start date of the subscription
      - name: subscription_ended_at 
        description: The end date of the subscription
      - name: price_plan_is_active
        description: Boolean indicating if the plan or price is active (true) or in-active (false).
      - name: price_plan_amount
        description: The unit amount in cents to be charged, represented as a whole integer if possible.
      - name: price_plan_interval
        description: The frequency at which a subscription is billed. One of day, week, month or year.
      - name: price_plan_interval_count
        description: The number of intervals between subscription billings. For example, interval_count=3 bills every 3 months.
      - name: price_plan_nickname
        description: A brief description of the plan or price, hidden from customers.
      - name: price_plan_product_id
        description: Reference to the product this price or plan is about.
      - name: source_relation
        description: "{{ doc('source_relation') }}"

  - name: stripe__subscription_details
    description: Each record represents a subscription, enriched with customer details and payment aggregations.
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - subscription_id
            - source_relation
    columns:
      - name: subscription_id 
        description: Unique identifier for the subscription object.
      - name: customer_id 
        description: ID of the customer who owns the subscription.
      - name: customer_description 
        description: Description of the customer who owns the subscription.
      - name: customer_email 
        description: Email of the customer who owns the subscription.
      - name: status 
        description: Possible values are incomplete, incomplete_expired, trialing, active, past_due, canceled, or unpaid.
      - name: start_date_at 
        description: Date when the subscription was first created. The date might differ from the created date due to backdating.
      - name: ended_at 
        description: If the subscription has ended, the date the subscription ended.
      - name: billing 
        description: How the description is billed.
      - name: billing_cycle_anchor 
        description: Determines the date of the first full invoice, and, for plans with month or year intervals, the day of the month for subsequent invoices.
      - name: canceled_at 
        description: If the subscription has been canceled, the date of that cancellation. If the subscription was canceled with cancel_at_period_end, canceled_at will still reflect the date of the initial cancellation request, not the end of the subscription period when the subscription is automatically moved to a canceled state.
      - name: created_at 
        description: Time at which the subscription object was created.
      - name: current_period_start 
        description: Start of the current period that the subscription has been invoiced for.
      - name: current_period_end 
        description: End of the current period that the subscription has been invoiced for. At the end of this period, a new invoice will be created.
      - name: days_until_due 
        description: Number of days a customer has to pay invoices generated by this subscription. This value will be null for subscriptions where collection_method=charge_automatically.
      - name: is_cancel_at_period_end 
        description: If the subscription has been canceled with the at_period_end flag set to true, cancel_at_period_end on the subscription will be true. You can use this attribute to determine whether a subscription that has a status of active is scheduled to be canceled at the end of the current period.
      - name: cancel_at 
        description: A date in the future at which the subscription will automatically get canceled
      - name: number_invoices_generated 
        description: Number of invoices that have been generated for this subscription.
      - name: total_amount_billed 
        description: The total amount that has been billed to the customer for this subscription.
      - name: total_amount_paid 
        description: The total amount paid by the customer for this subscription.
      - name: total_amount_remaining 
        description: Any outstanding balance for invoices related to this subscription.
      - name: most_recent_invoice_created_at 
        description: The timestamp of the most recent invoice for this subscription created.
      - name: average_invoice_amount 
        description: The average amount of invoices generated for this subscription
      - name: average_line_item_amount 
        description: The average sum of the line items for invoices generated for this subscription
      - name: avg_num_line_items 
        description: The average number of line items for invoices generated for this subscription   
      - name: source_relation
        description: "{{ doc('source_relation') }}"

  - name: stripe__daily_overview
    description: Each record represents, per account per day, a summary of daily totals and rolling totals by transaction type (balances, payments, refunds, payouts, and other transactions).
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - account_id
            - date_day
            - source_relation
    columns:
      - name: account_id
        description: The ID of the account tied to the balance.
      - name: date_day
        description: Day of record, taken from the date of each balance transaction.
      - name: source_relation
        description: "{{ doc('source_relation') }}"
      - name: total_daily_sales_amount
        description: Total amount for when transaction type is a charge or payment.
      - name: total_daily_refunds_amount
        description: Total amount for when transaction type is payment_refund or refund.
      - name: total_daily_adjustments_amount
        description: Total amount for when transaction type is adjustment
      - name: total_daily_other_transactions_amount
        description: Total amount for when transaction type is not of the prior types.
      - name: total_daily_gross_transaction_amount
        description: Total amount for when transaction type is not payout or transfer
      - name: total_daily_net_transactions_amount
        description: Total net for when transaction type is not payout or transfer.
      - name: total_daily_payout_fee_amount
        description: Total fee for when transaction type is payout or transfer.
      - name: total_daily_gross_payout_amount
        description: Total amount for when transaction type is payout or transfer.
      - name: daily_net_activity_amount
        description: Net amount minus fees from payouts and transfers. 
      - name: daily_end_balance_amount
        description: daily_net_activity_amount + total_daily_gross_payout_amount
      - name: total_daily_sales_count
        description: Count of total balance transactions where type is payment or charge.
      - name: total_daily_payouts_count
        description: Count of total balance transactions where type is payout.
      - name: total_daily_adjustments_count
        description: Count of total balance transactions where type is adjustment.
      - name: total_daily_failed_charge_count
        description: Count of incomplete charges.
      - name: total_daily_failed_charge_amount
        description: Total amount of incomplete charges.
      - name: rolling_total_daily_sales_amount
        description: Rolling total of total_daily_sales_amount
      - name: rolling_total_daily_refunds_amount
        description: Rolling total of total_daily_refunds_amount
      - name: rolling_total_daily_adjustments_amount
        description: Rolling total of total_daily_adjustments_amount
      - name: rolling_total_daily_other_transactions_amount
        description: Rolling total of total_daily_other_transactions_amount
      - name: rolling_total_daily_gross_transaction_amount
        description: Rolling total of total_daily_gross_transaction_amount
      - name: rolling_total_daily_net_transactions_amount
        description: Rolling total of total_daily_net_transactions_amount
      - name: rolling_total_daily_payout_fee_amount
        description: Rolling total of total_daily_payout_fee_amount
      - name: rolling_total_daily_gross_payout_amount
        description: Rolling total of total_daily_gross_payout_amount
      - name: rolling_daily_net_activity_amount
        description: Rolling total of daily_net_activity_amount
      - name: rolling_daily_end_balance_amount
        description: Rolling total of daily_end_balance_amount
      - name: rolling_total_daily_sales_count
        description: Rolling total of total_daily_sales_count
      - name: rolling_total_daily_payouts_count
        description: Rolling total of total_daily_payouts_count
      - name: rolling_total_daily_adjustments_count
        description: Rolling total of total_daily_adjustments_count
      - name: rolling_total_daily_failed_charge_count
        description: Rolling total of total_daily_failed_charge_count
      - name: rolling_total_daily_failed_charge_amount
        description: Rolling total of total_daily_failed_charge_amount

  - name: stripe__activity_itemized_2
    description: Modeled after the [titular report](https://stripe.com/docs/reports/activity#downloading-data) from Stripe, each record represents a balance transaction and additional details such as associated customer, charge, refund, fee, and invoice information. This class of Activity reports allows you to see your payments activity alongside the related fees for the same period of time. Designed specifically for users with Interchange Plus (IC+) pricing, it presents users with fees on the date they incur them. This makes it useful for calculating fee accrual entries and understanding your net payments activity. This itemized report contains a full list of individual transactions.
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - balance_transaction_id
            - source_relation
    columns:
      - name: balance_transaction_id	
        description: Unique identifier for the related balance transaction.
      - name: balance_transaction_created_at	
        description: Time (in UTC) at which the balance transaction affected your Stripe balance.
      - name: balance_transaction_reporting_category	
        description: (Beta) Reporting category is a top-level categorization of balance transactions for financial accounting purposes.
      - name: currency	
        description: Three-letter ISO code for the currency in which the amount is defined.
      - name: amount	
        description: Amount of this activity, expressed in major units of the currency (e.g., dollars for USD, or yen for JPY).
      - name: charge_id	
        description: The unique ID of the related charge, if any. For charges, this will be the charge itself; for refunds or disputes, this will be the original charge being refunded or disputed.
      - name: payment_intent_id		
        description: The unique ID of the related Payment Intent, if any.
      - name: refund_id	
        description: The unique ID of the related refund, if any.
      - name: dispute_id	
        description: The unique ID of the related dispute, if any.
      - name: invoice_id		
        description: Unique ID for the invoice associated with this balance transaction. Available for charges, refunds, and disputes made in connection with a Stripe Billing invoice.
      - name: invoice_number		
        description: Number for the invoice associated with this balance transaction. Available for charges, refunds, and disputes made in connection with a Stripe Billing invoice.
      - name: subscription_id		
        description: Unique ID for the subscription associated with this balance transaction. Available for charges, refunds, and disputes made in connection with a Stripe Billing subscription.
      - name: transfer_id		
        description: The unique ID of the related transfer, if any.
      - name: customer_id		
        description: The unique ID of the related customer, if any.
      - name: customer_email		
        description: Email address of the customer, if any, associated with this balance transaction.
      - name: customer_name		
        description: Name of the customer, if any, associated with this balance transaction.
      - name: customer_description		
        description: Description provided when creating the customer, often used to store the customer name.
      - name: customer_shipping_address_line_1		
        description: First line of the customer shipping address associated with this charge, if any
      - name: customer_shipping_address_line_2		
        description: Second line of the customer shipping address associated with this charge, if any
      - name: customer_shipping_address_city		
        description: City of the customer shipping address associated with this charge, if any
      - name: customer_shipping_address_state		
        description: State of the customer shipping address associated with this charge, if any
      - name: customer_shipping_address_postal_code		
        description: Postal code of the customer shipping address associated with this charge, if any
      - name: customer_shipping_address_country		
        description: Country of the customer shipping address associated with this charge, if any
      - name: customer_address_line_1		
        description: First line of the customer address associated with this charge, if any
      - name: customer_address_line_2		
        description: Second line of the customer address associated with this charge, if any
      - name: customer_address_city		
        description: City of the customer address associated with this charge, if any
      - name: customer_address_state		
        description: State of the customer address associated with this charge, if any
      - name: customer_address_postal_code		
        description: Postal code of the customer address associated with this charge, if any
      - name: customer_address_country		
        description: Country of the customer address associated with this charge, if any
      - name: shipping_address_line_1		
        description: First line of the shipping address associated with this charge, if any
      - name: shipping_address_line_2		
        description: Second line of the shipping address associated with this charge, if any
      - name: shipping_address_city		
        description: City of the shipping address associated with this charge, if any
      - name: shipping_address_state		
        description: State of the shipping address associated with this charge, if any
      - name: shipping_address_postal_code		
        description: Postal code of the shipping address associated with this charge, if any
      - name: shipping_address_country		
        description: Country of the shipping address associated with this charge, if any
      - name: card_address_line_1		
        description: First line of the card address associated with this charge, if any
      - name: card_address_line_2		
        description: Second line of the card address associated with this charge, if any
      - name: card_address_city		
        description: City of the card address associated with this charge, if any
      - name: card_address_state		
        description: State of the card address associated with this charge, if any
      - name: card_address_postal_code		
        description: Postal code of the card address associated with this charge, if any
      - name: card_address_country		
        description: Country of the card address associated with this charge, if any
      - name: automatic_payout_id		
        description: (Applies only to accounts on automatic payouts.) For paid-out activity, this will be the unique ID for the associated payout.
      - name: automatic_payout_effective_at		
        description: The date we expect this automatic payout to arrive in your bank account, in UTC. This is also when the paid-out funds are deducted from your Stripe balance.
      - name: payment_method_type		
        description: The type of payment method used in the related payment.
      - name: card_brand		
        description: Card brand, if applicable.
      - name: card_funding		
        description: Card funding type, if applicable.
      - name: card_country		
        description: Two-letter ISO code representing the country of the card.
      - name: statement_descriptor		
        description: The dynamic statement descriptor or suffix specified when the related charge was created.
      - name: customer_facing_amount		
        description: For transactions associated with charges, refunds, or disputes, the amount of the original charge, refund, or dispute. If the customer was charged in a different currency than your account’s default, this field will reflect the amount as seen by the customer.
      - name: balance_transaction_description	
        description: An arbitrary string attached to the balance transaction.
      - name: connected_account_id		
        description: For Stripe Connect activity related to a connected account, the unique ID for the account.
      - name: connected_account_country		
        description: For Stripe Connect activity related to a connected account, the two-letter ISO code representing the country of the account.
      - name: connected_account_direct_charge_id		
        description: (Beta) For Stripe Connect activity related to a connected account, charge id of the direct charge that happened on connected account.
      - name: source_relation
        description: "{{ doc('source_relation') }}"

  - name: stripe__balance_change_from_activity_itemized_3
    description: Modeled after the [titular report](https://stripe.com/docs/reports/balance#schema-balance-change-from-activity-itemized-3) from Stripe, each record represents a balance transaction and additional details such as associated customer, charge, refund, card, and invoice information. This class of Balance reports is similar to a bank statement, helping you to reconcile your Stripe balance at the end of the month. The Balance report is most useful if you treat Stripe like a bank account for accounting purposes, reconciling the balance at the end of each month. If you have automatic payouts enabled and prefer to reconcile the transactions settled in each payout, see the Payout reconciliation report instead. The Balance Change from Activity reports provides a more detailed breakdown of your transactions by reporting category. This section includes all transactions except for payouts that affect your balance, including charges, refunds, disputes, other adjustments, and fees.
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - balance_transaction_id
            - source_relation
    columns:
      - name: balance_transaction_id	
        description: Unique identifier for the balance transaction.
      - name: created
        description: Time at which the balance transaction was created. Dates in the requested timezone, or UTC if not provided.
      - name: available_on	
        description: The date the balance transaction’s net funds will become available in the Stripe balance. Dates in the requested timezone, or UTC if not provided.
      - name: currency	
        description: Three-letter ISO code for the currency in which gross, fee and net are defined.
      - name: gross	
        description: Gross amount of the transaction. Expressed in major units of the currency (e.g. dollars for USD, yen for JPY).
      - name: fee	
        description: Fees paid for this transaction. Expressed in major units of the currency (e.g. dollars for USD, yen for JPY).
      - name: net	
        description: Net amount of the transaction. Expressed in major units of the currency (e.g. dollars for USD, yen for JPY).
      - name: reporting_category	
        description: Reporting Category is a new categorization of balance transactions, meant to improve on the current type field.
      - name: source_id		
        description: The Stripe object to which this transaction is related.
      - name: description	
        description: An arbitrary string attached to the balance transaction. Often useful for displaying to users.
      - name: customer_facing_amount		
        description: For transactions associated with charges, refunds, or disputes, the amount of the original charge, refund, or dispute. If the customer was charged in a different currency than your account’s default, this field will reflect the amount as seen by the customer.
      - name: customer_facing_currency		
        description: For transactions associated with charges, refunds, or disputes, the three-letter ISO currency code for customer_facing_amount.
      - name: automatic_payout_id		
        description: ID of the automatically created payout associated with this balance transaction (only set if your account is on an automatic payout schedule).
      - name: automatic_payout_effective_at		
        description: The date we expect this automatic payout to arrive in your bank account, in the requested timezone, or UTC if not provided. This is also when the paid-out funds are deducted from your Stripe balance.
      - name: customer_id		
        description: The unique ID of the related customer, if any.
      - name: customer_email		
        description: Email address of the customer, if any, associated with this balance transaction.
      - name: customer_name		
        description: Name of the customer, if any, associated with this balance transaction.
      - name: customer_description		
        description: Description provided when creating the customer, often used to store the customer name.
      - name: customer_shipping_address_line_1		
        description: First line of the customer shipping address associated with this charge, if any
      - name: customer_shipping_address_line_2		
        description: Second line of the customer shipping address associated with this charge, if any
      - name: customer_shipping_address_city		
        description: City of the customer shipping address associated with this charge, if any
      - name: customer_shipping_address_state		
        description: State of the customer shipping address associated with this charge, if any
      - name: customer_shipping_address_postal_code		
        description: Postal code of the customer shipping address associated with this charge, if any
      - name: customer_shipping_address_country		
        description: Country of the customer shipping address associated with this charge, if any
      - name: customer_address_line_1		
        description: First line of the customer address associated with this charge, if any
      - name: customer_address_line_2		
        description: Second line of the customer address associated with this charge, if any
      - name: customer_address_city		
        description: City of the customer address associated with this charge, if any
      - name: customer_address_state		
        description: State of the customer address associated with this charge, if any
      - name: customer_address_postal_code		
        description: Postal code of the customer address associated with this charge, if any
      - name: customer_address_country		
        description: Country of the customer address associated with this charge, if any
      - name: shipping_address_line_1		
        description: First line of the shipping address associated with this charge, if any
      - name: shipping_address_line_2		
        description: Second line of the shipping address associated with this charge, if any
      - name: shipping_address_city		
        description: City of the shipping address associated with this charge, if any
      - name: shipping_address_state		
        description: State of the shipping address associated with this charge, if any
      - name: shipping_address_postal_code		
        description: Postal code of the shipping address associated with this charge, if any
      - name: shipping_address_country		
        description: Country of the shipping address associated with this charge, if any
      - name: card_address_line_1		
        description: First line of the card address associated with this charge, if any
      - name: card_address_line_2		
        description: Second line of the card address associated with this charge, if any
      - name: card_address_city		
        description: City of the card address associated with this charge, if any
      - name: card_address_state		
        description: State of the card address associated with this charge, if any
      - name: card_address_postal_code		
        description: Postal code of the card address associated with this charge, if any
      - name: card_address_country		
        description: Country of the card address associated with this charge, if any
      - name: charge_id		
        description: Unique identifier for the original charge associated with this balance transaction. Available for charges, refunds and disputes.
      - name: payment_intent_id		
        description: The unique ID of the related Payment Intent, if any.
      - name: charge_created		
        description: Creation time of the original charge associated with this balance transaction. Available for charges, refunds and disputes. For charges that were separately authorized and captured, this is the authorization time. Dates in the requested timezone, or UTC if not provided.
      - name: invoice_id		
        description: Unique ID for the invoice associated with this balance transaction. Available for charges, refunds, and disputes made in connection with a Stripe Billing invoice.
      - name: invoice_number		
        description: Number for the invoice associated with this balance transaction. Available for charges, refunds, and disputes made in connection with a Stripe Billing invoice.
      - name: subscription_id		
        description: Unique ID for the subscription associated with this balance transaction. Available for charges, refunds, and disputes made in connection with a Stripe Billing subscription.
      - name: payment_method_type		
        description: The type of payment method used in the related payment.
      - name: card_brand		
        description: Card brand, if applicable.
      - name: card_funding		
        description: Card funding type, if applicable.
      - name: card_country		
        description: Two-letter ISO code representing the country of the card.
      - name: statement_descriptor		
        description: The dynamic statement descriptor or suffix specified when the related charge was created.
      - name: dispute_reason		
        description: Reason given by cardholder for dispute. Read more about dispute reasons.
      - name: connected_account_id		
        description: For Stripe Connect activity related to a connected account, the unique ID for the account.
      - name: connected_account_country		
        description: For Stripe Connect activity related to a connected account, the two-letter ISO code representing the country of the account.
      - name: connected_account_direct_charge_id		
        description: (Beta) For Stripe Connect activity related to a connected account, charge id of the direct charge that happened on connected account.
      - name: source_relation
        description: "{{ doc('source_relation') }}"

  - name: stripe__ending_balance_reconciliation_itemized_4
    description: Modeled after the [titular report](https://stripe.com/docs/reports/payout-reconciliation#schema-ending-balance-reconciliation-itemized-4) from Stripe, each record represents an automatic payout and additional details such as associated customer, shipping, card, subscription information. This report belongs to the class of Payout Reconciliation reports. The Payout reconciliation report helps you match the payouts you receive in your bank account with the batches of payments and other transactions that they relate to. The payout reconciliation report is only available for users with automatic payouts enabled, and is optimized for users who prefer to reconcile the transactions included in each payout as a settlement batch. If you use manual payouts or prefer to track and reconcile your Stripe balance like a bank account, see the Balance report instead. To help you decide which report is right for you, see the guide for selecting reports. This Ending Balance Reconciliation section provides a similar breakdown of the transactions that hadn’t been settled as of the report’s end date.
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - automatic_payout_id
            - source_relation
    columns:
      - name: automatic_payout_id
        description: ID of the automatically created payout associated with this balance transaction (only set if your account is on an automatic payout schedule).
      - name: automatic_payout_effective_at
        description: The date we expect this automatic payout to arrive in your bank account, in the requested timezone, or UTC if not provided. This is also when the paid-out funds are deducted from your Stripe balance.
      - name: balance_transaction_id
        description: Unique identifier for the balance transaction.
      - name: created
        description: Time at which the balance transaction was created. Dates in the requested timezone, or UTC if not provided.
      - name: available_on
        description: The date the balance transaction’s net funds will become available in the Stripe balance. Dates in the requested timezone, or UTC if not provided.
      - name: currency
        description: Three-letter ISO code for the currency in which gross, fee and net are defined.
      - name: gross
        description: Gross amount of the transaction. Expressed in major units of the currency (e.g. dollars for USD, yen for JPY).
      - name: fee
        description: Fees paid for this transaction. Expressed in major units of the currency (e.g. dollars for USD, yen for JPY).
      - name: net
        description: Net amount of the transaction. Expressed in major units of the currency (e.g. dollars for USD, yen for JPY).
      - name: reporting_category
        description: Reporting Category is a new categorization of balance transactions, meant to improve on the current type field.
      - name: source_id
        description: The Stripe object to which this transaction is related.
      - name: description
        description: An arbitrary string attached to the balance transaction. Often useful for displaying to users.
      - name: customer_facing_amount
        description: For transactions associated with charges, refunds, or disputes, the amount of the original charge, refund, or dispute. If the customer was charged in a different currency than your account’s default, this field will reflect the amount as seen by the customer.
      - name: customer_facing_currency
        description: For transactions associated with charges, refunds, or disputes, the three-letter ISO currency code for customer_facing_amount.
      - name: customer_id
        description: The unique ID of the related customer, if any.
      - name: customer_email
        description: Email address of the customer, if any, associated with this balance transaction.
      - name: customer_name
        description: Name of the customer, if any, associated with this balance transaction.
      - name: customer_description
        description: Description provided when creating the customer, often used to store the customer name.
      - name: customer_shipping_address_line_1
        description: First line of the customer shipping address associated with this charge, if any
      - name: customer_shipping_address_line_2
        description: Second line of the customer shipping address associated with this charge, if any
      - name: customer_shipping_address_city
        description: City of the customer shipping address associated with this charge, if any
      - name: customer_shipping_address_state
        description: State of the customer shipping address associated with this charge, if any
      - name: customer_shipping_address_postal_code
        description: Postal code of the customer shipping address associated with this charge, if any
      - name: customer_shipping_address_country
        description: Country of the customer shipping address associated with this charge, if any
      - name: customer_address_line_1
        description: First line of the customer address associated with this charge, if any
      - name: customer_address_line_2
        description: Second line of the customer address associated with this charge, if any
      - name: customer_address_city
        description: City of the customer address associated with this charge, if any
      - name: customer_address_state
        description: State of the customer address associated with this charge, if any
      - name: customer_address_postal_code
        description: Postal code of the customer address associated with this charge, if any
      - name: customer_address_country
        description: Country of the customer address associated with this charge, if any
      - name: shipping_address_line_1
        description: First line of the shipping address associated with this charge, if any
      - name: shipping_address_line_2
        description: Second line of the shipping address associated with this charge, if any
      - name: shipping_address_city
        description: City of the shipping address associated with this charge, if any
      - name: shipping_address_state
        description: State of the shipping address associated with this charge, if any
      - name: shipping_address_postal_code
        description: Postal code of the shipping address associated with this charge, if any
      - name: shipping_address_country
        description: Country of the shipping address associated with this charge, if any
      - name: card_address_line_1
        description: First line of the card address associated with this charge, if any
      - name: card_address_line_2
        description: Second line of the card address associated with this charge, if any
      - name: card_address_city
        description: City of the card address associated with this charge, if any
      - name: card_address_state
        description: State of the card address associated with this charge, if any
      - name: card_address_postal_code
        description: Postal code of the card address associated with this charge, if any
      - name: card_address_country
        description: Country of the card address associated with this charge, if any
      - name: charge_id
        description: Unique identifier for the original charge associated with this balance transaction. Available for charges, refunds and disputes.
      - name: payment_intent_id
        description: The unique ID of the related Payment Intent, if any.
      - name: charge_created
        description: Creation time of the original charge associated with this balance transaction. Available for charges, refunds and disputes. For charges that were separately authorized and captured, this is the authorization time. Dates in the requested timezone, or UTC if not provided.
      - name: invoice_id
        description: Unique ID for the invoice associated with this balance transaction. Available for charges, refunds, and disputes made in connection with a Stripe Billing invoice.
      - name: invoice_number
        description: Unique Number for the invoice associated with this balance transaction. Available for charges, refunds, and disputes made in connection with a Stripe Billing invoice.
      - name: subscription_id
        description: Unique ID for the subscription associated with this balance transaction. Available for charges, refunds, and disputes made in connection with a Stripe Billing subscription.
      - name: payment_method_type
        description: The type of payment method used in the related payment.
      - name: card_brand
        description: Card brand, if applicable.
      - name: card_funding
        description: Card funding type, if applicable.
      - name: card_country
        description: Two-letter ISO code representing the country of the card.
      - name: statement_descriptor
        description: The dynamic statement descriptor or suffix specified when the related charge was created.
      - name: dispute_reason
        description: Reason given by cardholder for dispute. Read more about dispute reasons.
      - name: connected_account_id
        description: For Stripe Connect activity related to a connected account, the unique ID for the account.
      - name: connected_account_country
        description: For Stripe Connect activity related to a connected account, the two-letter ISO code representing the country of the account.
      - name: connected_account_direct_charge_id
        description: (Beta) For Stripe Connect activity related to a connected account, charge id of the direct charge that happened on connected account.
      - name: source_relation
        description: "{{ doc('source_relation') }}"
    
  - name: stripe__payout_itemized_3
    description: Modeled after the [titular report](https://stripe.com/docs/reports/balance#schema-payouts-itemized-3) from Stripe, each record represents a payout and its additional details such as expected arrival date and current status. This report belongs to the class of Balance reports. The Balance report is similar to a bank statement, helping you to reconcile your Stripe balance at the end of the month. The Balance report is most useful if you treat Stripe like a bank account for accounting purposes, reconciling the balance at the end of each month. If you have automatic payouts enabled and prefer to reconcile the transactions settled in each payout, see the Payout reconciliation report instead. The Payout Itemized report information on each payout made to your bank account.
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - payout_id
            - source_relation
    columns:
      - name: payout_id
        description: The Stripe object to which this transaction is related.
      - name: effective_at		
        description: For automatic payouts, this is the date we expect funds to arrive in your bank account. For manual payouts, this is the date the payout was initiated. In both cases, it’s the date the paid-out funds are deducted from your Stripe balance. All dates in the requested timezone, or UTC if not provided.
      - name: currency		
        description: Three-letter ISO code for the currency in which gross, fee and net are defined.
      - name: gross		
        description: Gross amount of the transaction. Expressed in major units of the currency (e.g. dollars for USD, yen for JPY).
      - name: fee
        description: Fees paid for this transaction. Expressed in major units of the currency (e.g. dollars for USD, yen for JPY).
      - name: net		
        description: Net amount of the transaction. Expressed in major units of the currency (e.g. dollars for USD, yen for JPY).
      - name: reporting_category		
        description: Reporting Category is a new categorization of balance transactions, meant to improve on the current type field.
      - name: balance_transaction_id		
        description: Unique identifier for the balance transaction. Specifically for Payout, the relation is the ID of the balance transaction that describes the impact of this payout on your account balance.
      - name: description		
        description: An arbitrary string attached to the balance transaction. Often useful for displaying to users.
      - name: payout_expected_arrival_date		
        description: Date the payout is scheduled to arrive in the bank. This factors in delays like weekends or bank holidays.
      - name: payout_status		
        description: Current status of the payout (paid, pending, in_transit, canceled or failed). A payout will be pending until it is submitted to the bank, at which point it becomes in_transit. It will then change to paid if the transaction goes through. If it does not go through successfully, its status will change to failed or canceled.
      - name: payout_reversed_at		
        description: Typically this field will be empty. However, if the payout’s status is canceled or failed, this field will reflect the time at which it entered that status. Times in the requested timezone, or UTC if not provided.
      - name: payout_type		
        description: Can be bank_account or card.
      - name: payout_description		
        description: An arbitrary string attached to the payout. Often useful for displaying to users.
      - name: payout_destination_id		
        description: ID of the bank account or card the payout was sent to.
      - name: source_relation
        description: "{{ doc('source_relation') }}"